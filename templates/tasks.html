<!DOCTYPE html>
<html>
<head>
	<title>Список задач {{.CurList}}</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
	<link rel="stylesheet" type="text/css" href="/static/tasks.css?1">
	<link rel="stylesheet" type="text/css" href="/static/libs/jquery-ui.min.css">
	<script src="/static/libs/jquery-3.3.1.min.js"></script>
	<script src="/static/libs/jquery-ui.min.js"></script>
	<!--<script src="/static/libs/jquery.ui.touch-punch.min.js"></script>-->
	<script src="/static/tasks.js?1"></script>
</head>
<body>
	<form id="ListForm">
		<label id="ListTitle">Список задач: </label>
		<select title="Выберите список задач с которым будете работать" name="list" id="ListSelect">
			{{- range .MyLists}}
		 	<option value="{{.}}"{{if eq . $.CurList}} selected="selected"{{end}}>{{.}}</option>
		 	{{- end}}
		</select>
		<span id="ListButtons">
			<button id="ListCreate">Создать новый список</button>
			<label id="ListHelp">Помощь</label>
		</span>
	</form>
	<form id="TaskForm">
		<label id="TaskAction">Задача: </label>
		<input type="hidden" id="TaskId" name="id">
		<input type="hidden" id="TaskList" name="list">
		<input type="text" id="TaskText" name="text" size="55">
		<select title="Раздел, в который будет добавлена задача" name="section" id="TaskSection">
		 	<option value="vs">ВАЖНО И СРОЧНО</option>
		 	<option value="vn">ВАЖНО, но несрочно</option>
		 	<option value="ns">неважно, но СРОЧНО</option>
			<option value="nn">неважно и несрочно</option>
		 	<option value="vh">входящие задачи</option>
		</select>
		<select title="Текущий статус задачи" name="status" id="TaskStatus">
		 	<option value="created">создана</option>
		 	<option value="moved">перенесена</option>
		 	<option value="canceled">отменена</option>
		 	<option value="done">завершена</option>
		</select>
		<button id="TaskSubmit">Добавить</button>
		<label id="TaskResult"></label>
		<span id="TaskButtons">
			<button id="TaskMove" title="{{.ActualListFullName}}">Перенести в список {{.ActualListShortName}}</button>
			<button id="TaskToday">Буду делать сегодня</button>
			<button id="TaskFromday">Удалить из списка на сегодня</button>
		</span>
	</form>
	<table id="TasksTable">
	<tr>		
		<td class="td">
			<header class="ColumnHeader">СЕГОДНЯ <button id="ClearDone" title="Удалить выполненные">x</button> <button id="ClearAll" title="Удалить все">X</button></header>
			<table id="TodayTable">
				<tr>
					<td class="TimeLabels">
						<ul id="TimeLabels">
							{{- range .TimeLabels}}
							{{- if or (not .IsRelax) (not $.IsMobile)}}
							<li class="TimeLabel">{{.Text}}</li>
							{{- end}}
							{{- end}}
						</ul>
					</td>
					<td class="TodayTasks">
						<ul id="TodayTasks">
							{{- range .TodayTasks}}
							{{- if and .IsRelax (not $.IsMobile)}}
							<li class="TodayRelax"></li>
							{{- end}}
							{{- if not .IsRelax}}
							<li id="{{.Id.Hex}}" class="TodayTask {{.Status}}" style="height:{{.Height}}px" title="{{.Text}}">{{.Text}}</li>
							{{- end}}
							{{- end}}
						</ul>
					</td>
				</tr>
			</table>
		</td>
	{{- if .IsMobile}}</tr>
	<tr>{{- end}}
		<td class="vs">
			<header class="ColumnHeader">ВАЖНО И СРОЧНО <button class="add">+</button></header>
			{{- range .Vs}}
			<p id="{{.Id.Hex}}" class="{{.Status}}">{{marktask .Text}}</p>
			{{- end}}
		</td>
	{{- if .IsMobile}}</tr>
	<tr>{{- end}}
		<td class="vn">
			<header class="ColumnHeader">ВАЖНО, но несрочно <button class="add">+</button></header>
			{{- range .Vn}}
			<p id="{{.Id.Hex}}" class="{{.Status}}">{{marktask .Text}}</p>
			{{- end}}
		</td>
	{{- if .IsMobile}}</tr>
	<tr>{{- end}}
		<td class="ns">
			<header class="ColumnHeader">неважно, но СРОЧНО <button class="add">+</button></header>
			{{- range .Ns}}
			<p id="{{.Id.Hex}}" class="{{.Status}}">{{marktask .Text}}</p>
			{{- end}}
		</td>
	{{- if .IsMobile}}</tr>
	<tr>{{- end}}
		<td class="nn">
			<header class="ColumnHeader">неважно и несрочно <button class="add">+</button></header>
			{{- range .Nn}}
			<p id="{{.Id.Hex}}" class="{{.Status}}">{{marktask .Text}}</p>
			{{- end}}
		</td>
	{{- if .IsMobile}}</tr>
	<tr>{{- end}}
		<td class="vh">
			<header class="ColumnHeader">входящие задачи <button class="add">+</button></header>
			{{- range .Vh}}
			<p id="{{.Id.Hex}}" class="{{.Status}}">{{marktask .Text}}</p>
			{{- end}}
		</td>
	</tr>
	</table>
</body>
</html>
